"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const s=require("mini");function w(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+r/4).toString(16))}function C({content:r,buttons:l,onCancel:o,onClose:u,type:d,placeholder:c="",width:i}){const t=w();function a(e){e.preventDefault(),e.stopPropagation(),o(document.getElementById(t))}function n(e){if(e.preventDefault(),e.stopPropagation(),u)return u(document.getElementById(t),document.getElementById("_in"+t).value)}function m(e,v){e.preventDefault(),e.stopPropagation(),v(document.getElementById(t),document.getElementById("_in"+t)?.value)}function f(e){e.key==="Escape"?a(e):e.key==="Enter"&&n(e)}return d==="prompt"?setTimeout(()=>{document.getElementById("_in"+t)?.focus()},10):l&&setTimeout(()=>{document.getElementById("_btn"+t)?.focus()},10),s.html`<div id="${t}" aria-busy="true" class="alert" @click="${a}"><div class="alert-message" @click="${e=>e.stopPropagation()}" @keyup="${f}"><div class="msg" style="${i?"width:"+i+"px;":""}">${r} ${d==="prompt"&&`<br/><input type='text' id='_in${t}' @keyup="${f}" placeholder="${c||""}"/>`}</div><div>${l?.map((e,v)=>()=>s.html`<button id="${e.focus?"_btn"+t:""}" selected="${e.focus?"true":""}" @click="${y=>m(y,e.onClick)}" tabindex="${v+1}">${e.label}</button>`)}</div></div></div>`}async function x(r,l,o){return await new Promise((u,d)=>{const c=document.body.querySelector("div"),i=document.createElement("div");c.appendChild(i);function t(n,m){n.parentElement.remove(),u(m)}function a(n){n.parentElement.remove(),u(!1)}s.render(i,()=>C({content:r,buttons:[{label:"Cancel",onClick:a},{label:"OK",onClick:t,focus:!0}],onClose:t,onCancel:a,type:"prompt",placeholder:o,width:l}))})}async function B(r,l){return await new Promise((o,u)=>{const d=document.body.querySelector("div"),c=document.createElement("div");d.appendChild(c);function i(a){a.parentElement.remove(),o(!0)}function t(a){a.parentElement.remove(),o(!1)}s.render(c,()=>C({content:r,buttons:[{label:"Cancel",onClick:t},{label:"OK",onClick:i,focus:!0}],onCancel:t,type:"confirm",width:l}))})}async function I(r,l){return await new Promise((o,u)=>{const d=document.body.querySelector("div"),c=document.createElement("div");d.appendChild(c);function i(t){t.parentElement.remove(),o(!1)}s.render(c,()=>C({content:r,buttons:[{label:"OK",onClick:i,focus:!0}],onCancel:i,type:"alert",width:l}))})}function M({renderItem:r,itemCount:l,rowHeight:o,nodePadding:u,onUpdateRow:d,onUpdateScroll:c,onMounted:i}){const t=s.reactive();let a,n,m,f;const e=s.reactive([]);l.signal?f=l:typeof l=="function"?f=s.reactive(l):f={value:l};function v(){const p=Math.max(0,Math.floor(n.scrollTop/o)-u),E=n.offsetHeight;let h=Math.ceil(E/o)+2*u;h=Math.min(f.value-p,h);const $=Math.floor(n.scrollTop/o),g=(m||0)+h-1;d&&d($,g);const _=p*o;t._value.firstElementChild.style.transform=`translateY(${_}px)`,c&&c(n.scrollTop),(m===void 0||m!==p)&&(m=p,e.value=new Array(h||0).fill(null).map((P,k)=>k+p))}function y(){a&&cancelAnimationFrame(a),a=requestAnimationFrame(v)}const b=f.value*o+"px";return s.onMount(()=>{const p=t._value;p&&(n=p.parentElement,n.style.overflowY!=="auto"&&(n.style.overflowY="auto"),n.addEventListener("scroll",y),v(),i&&i())}),s.onUnmount(()=>{n?.removeEventListener("scroll",y)}),s.html`<div :ref="${t}" aria-role="listbox" style="height:${b};overflow:hidden;position:relative;will-change:transform"><div class="result-list" tabindex="0">${s.map(e,r)}</div></div>`}exports.alert=I;exports.confirm=B;exports.prompt=x;exports.virtual=M;
